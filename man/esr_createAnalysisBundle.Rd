% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/bundle.R
\name{esr_createAnalysisBundle}
\alias{esr_createAnalysisBundle}
\title{Create Analysis Bundle for Mode 3 Workflow}
\usage{
esr_createAnalysisBundle(
  counts_t,
  de_table = NULL,
  selected_genes = NULL,
  qc_metrics = NULL,
  pheno = NULL,
  annot = NULL,
  transform_params = NULL,
  de_params = NULL,
  validation_issues = NULL,
  ...
)
}
\arguments{
\item{counts_t}{A transformed matrix (samples × genes). Required.}

\item{de_table}{Optional data.frame from \code{esr_analyzeDifferentialExpression()}
with columns: \code{gene_id}, \code{log2FC}, \code{FDR}, etc.}

\item{selected_genes}{Optional character vector of selected gene IDs.}

\item{qc_metrics}{Optional data.frame from \code{esr_computeQCMetrics()} with QC
metrics per sample.}

\item{pheno}{Optional data.frame with sample metadata.}

\item{annot}{Optional data.frame with gene annotations.}

\item{transform_params}{Optional list of transformation parameters used.}

\item{de_params}{Optional list of DE analysis parameters used.}

\item{validation_issues}{Optional data.frame with validation issues (from
\code{esr_validateEndometrial()}).}

\item{...}{Additional optional fields to include in bundle.}
}
\value{
A list (analysis bundle) with components:
\describe{
\item{counts_t}{Transformed matrix (samples × genes)}
\item{de_table}{DE table (data.frame or NULL)}
\item{selected_genes}{Selected gene IDs (character vector or NULL)}
\item{qc_metrics}{QC metrics (data.frame or NULL)}
\item{pheno}{Sample metadata (data.frame or NULL)}
\item{annot}{Gene annotations (data.frame or NULL)}
\item{transform_params}{Transformation parameters (list or NULL)}
\item{de_params}{DE analysis parameters (list or NULL)}
\item{validation_issues}{Validation issues (data.frame or NULL)}
}
Additional fields may be included via \code{...}.
}
\description{
Constructs an analysis bundle that packages all Mode 3 (Standalone Visualization
& Analysis) outputs together. The bundle provides a unified structure for
passing data between functions, exporting results, and integrating with Shiny.
}
\details{
The bundle validates component alignment:
\itemize{
\item Sample IDs: \code{counts_t} rownames, \code{qc_metrics$sample_id}, and \code{pheno$sample_id}
must align if all provided.
\item Gene IDs: \code{counts_t} colnames, \code{de_table$gene_id}, and \code{selected_genes} must
align (subject to filtering).
}

Warnings are issued for mismatches, but bundle creation proceeds.
}
\examples{
data(gse201926_sample)
mat_t <- esr_transform_log1p_cpm(gse201926_sample$counts)
de_table <- esr_analyzeDifferentialExpression(mat_t, gse201926_sample$pheno)
top_genes <- esr_selectTopGenes(de_table = de_table, n = 10, by = "de")
qc_metrics <- esr_computeQCMetrics(
  counts = gse201926_sample$counts,
  mat_t = mat_t,
  pheno = gse201926_sample$pheno
)

bundle <- esr_createAnalysisBundle(
  counts_t = mat_t,
  de_table = de_table,
  selected_genes = top_genes,
  qc_metrics = qc_metrics,
  pheno = gse201926_sample$pheno,
  annot = gse201926_sample$annot
)

# Access bundle components
bundle$counts_t
bundle$de_table
bundle$selected_genes
}
